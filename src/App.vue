<template>
  <div class="min-h-screen bg-white flex flex-col">
    <!-- Header -->
    <header
      class="sticky top-0 z-20 bg-white/95 backdrop-blur border-b px-3 sm:px-4 pt-2"
      :style="{
        paddingTop: 'calc(var(--tma-safe-area-top, env(safe-area-inset-top)) + 6px)'
      }"
    >
      <!-- –†—è–¥ 1: —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–∂–¥—É –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ (Close / ... ) -->
      <div
        class="grid items-center"
        :style="{
          gridTemplateColumns: 'var(--tma-native-side, 68px) 1fr var(--tma-native-side, 68px)',
          minHeight: '40px'
        }"
      >
        <!-- –õ–µ–≤—ã–π —Ä–µ–∑–µ—Ä–≤ –ø–æ–¥ –Ω–∞—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É -->
        <div aria-hidden="true"></div>

        <!-- –¶–ï–ù–¢–† (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ): –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é -->
        <RouterLink
          to="/"
          class="flex items-center justify-center gap-2 no-underline text-inherit"
          style="pointer-events:auto"
        >
          <span class="text-2xl leading-none">üíä</span>
          <h1 class="text-xl sm:text-2xl font-semibold text-gray-900">–ê–ø—Ç–µ–∫–∞</h1>
        </RouterLink>

        <!-- –ü—Ä–∞–≤—ã–π —Ä–µ–∑–µ—Ä–≤ –ø–æ–¥ –Ω–∞—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É -->
        <div aria-hidden="true"></div>
      </div>

      <!-- –†—è–¥ 2: –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ó–∞–∫–∞–∑—ã / –ò–∑–±—Ä–∞–Ω–Ω—ã–µ / –ö–æ—Ä–∑–∏–Ω–∞) -->
      <nav class="mt-2 flex items-center gap-3 justify-end">
        <RouterLink
          to="/orders"
          class="text-sm text-gray-700 hover:text-gray-900 inline-flex items-center gap-1"
        >
          üßæ <span>–ó–∞–∫–∞–∑—ã</span>
        </RouterLink>

        <!-- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ ‚Äî –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ -->
        <RouterLink
          to="/favorites"
          class="text-sm text-gray-700 hover:text-gray-900 inline-flex items-center gap-1"
        >
          ‚ù§Ô∏è <span>–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</span>
        </RouterLink>

        <CartBadge />
      </nav>
    </header>

    <!-- Content -->
    <main class="flex-1">
      <RouterView />
    </main>
  </div>
</template>

<script setup lang="ts">
import CartBadge from '@/components/CartBadge.vue'
import { RouterLink } from 'vue-router'

// –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
if ((window as any)?.Telegram?.WebApp?.ready) {
  (window as any).Telegram.WebApp.ready()
}
</script>