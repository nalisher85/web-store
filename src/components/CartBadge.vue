<template>
  <div class="relative">
    <router-link to="/cart" class="text-xl">
      ðŸ›’
    </router-link>
    <span
      v-if="cartCount > 0"
      class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full"
    >
      {{ cartCount }}
    </span>
  </div>
</template>

<script setup lang="ts">
import { useCartStore } from '@/stores/cartStore'
import { storeToRefs } from 'pinia'
import { computed } from 'vue'  

const cartStore = useCartStore()
const { items } = storeToRefs(cartStore)

// ðŸ” Ð¡Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ð¾Ð±Ñ‰ÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð²ÑÐµÑ… Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ñ‹)
const cartCount = computed(() =>
  items.value.reduce((total, item) => total + item.count, 0)
)

</script>
